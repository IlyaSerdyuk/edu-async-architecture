**Задание:** Разобрать каждое требование на составляющие (актор, команда, событие, query). Определить, как все бизнес цепочки будут выглядеть и на какие шаги они будут разбиваться.

# Event Storming
## Таск-трекер
### 1. Таск-трекер должен быть отдельным дашбордом и доступен всем сотрудникам компании UberPopug Inc
Actor: пользователь \
Command: Task.List \
Data: Task[] \
Event: Task.ShownList*

### 2. Авторизация в таск-трекере должна выполняться через общий сервис авторизации UberPopug Inc
Actor: не авторизованный пользователь \
Command: User.Login \
Data: User.login \
Event: User.Logined*

### 3. В таск-трекере должны быть только задачи. Проектов, скоупов и спринтов нет, потому что они не умещаются в голове попуга
Не применимо.

### 4. Новые таски может создавать кто угодно (администратор, начальник, разработчик, менеджер и любая другая роль). У задачи должны быть описание, статус (выполнена или нет) и попуг, на которого заассайнена задача
Actor: пользователь \
Command: Task.Create \
Data: Task.description, Task.status, Task.user_id \
Event: Task.Created

### 5. Менеджеры или администраторы должны иметь кнопку «заассайнить задачи», которая возьмёт все открытые задачи и рандомно заассайнит каждую на любого из сотрудников (кроме менеджера и администратора). Не успел закрыть задачу до реассайна — сорян, делай следующую
Actor: пользователь с ролью admin или manager \
Command: Task.ReassignAll \
Data: Task[] (все), User[] (все с ролью executor) \
Event: Task.Updated[] (по событию на каждую задачу с указанием на кого переназначена задача) \

### 6. Каждый сотрудник должен иметь возможность видеть в отдельном месте список заассайненных на него задач
Actor: пользователь с ролью executor \
Command: Task.List \
Data: Task[] \
Event: Task.ShownList*

### + отметить задачу выполненной
Actor: пользователь с ролью executor \
Command: Task.Close \
Data: Task, User \
Event: Task.Closed

## Аккаунтинг: кто сколько денег заработал
### 1. Аккаунтинг должен быть в отдельном дашборде и доступным только для администраторов и бухгалтеров
#### У обычных попугов доступ к аккаунтингу тоже должен быть. Но только к информации о собственных счетах (аудит лог + текущий баланс)
Actor: пользователь с ролью executor \
Command: Account.ShowExecutorBalance \
Data: Account \
Event: Account.ShownExecutorBalance*

Actor: пользователь ролью executor \
Command: AuditLog.Show \
Data: AuditLog[] \
Event: AuditLog.Shown*

#### У админов и бухгалтеров должен быть доступ к общей статистике по деньгами заработанным (количество заработанных топ-менеджментом за сегодня денег + статистика по дням).
Actor: пользователь с ролью admin или accountant \
Command: Account.ShowManagersBalance \
Data: Account[] \
Event: Account.ShownManagersBalance*

### 2. Авторизация в дешборде аккаунтинга должна выполняться через общий сервис аутентификации UberPopug Inc.
Совпадает с общей авторизацией.

### 3. У каждого из сотрудников должен быть свой счёт, который показывает, сколько за сегодня он получил денег. У счёта должен быть аудитлог того, за что были списаны или начислены деньги, с подробным описанием каждой из задач.
Совпадает с первым требованием по аккаунтингу.

### 4. Расценки:
#### Назначение задачи на сотрудника (при создании задачи или переназначении задач)
Actor: событие Task.Created или Task.Updated \
Command: Account.TaskAssign \
Data: Account, AuditLog \
Event: Account.TaskAssigned

#### Обработка завершения задачи
Actor: событие Task.Closed \
Command: Account.TaskClose \
Data: Task, User.id \
Event: Task.Closed

### 5. Дешборд должен выводить количество заработанных топ-менеджментом за сегодня денег.
Совпадает с первым требованием по аккаунтингу.

### 6. В конце дня необходимо:
#### a) считать сколько денег сотрудник получил за рабочий день
Actor: расписание \
Command: Account.DayClose \
Data: Account \
Event: Account.DayClosed

#### b) отправлять на почту сумму выплаты.
Actor: событие Account.DayClosed \
Command: Account.Payment \
Data: Account \
Event: Account.Paid

### 7. После выплаты баланса (в конце дня) он должен обнуляться, и в аудитлоге всех операций аккаунтинга должно быть отображено, что была выплачена сумма.
Actor: событие Account.Paid \
Command: AuditLog.DayClose \
Data: AuditLog \
Event: AuditLog.DayClosed

### 8. Дашборд должен выводить информацию по дням, а не за весь период сразу.
Совпадает с первым требованием по аккаунтингу.

--
* Сейчас ни кто не подписан на событие, но лог событий можно использовать для восстаноления 
